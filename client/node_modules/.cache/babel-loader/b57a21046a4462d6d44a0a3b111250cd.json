{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ASUS/Documents/React/MERN-E/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ASUS/Documents/React/MERN-E/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ASUS/Documents/React/MERN-E/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import axios from'axios';import swal from'sweetalert';import{GlobalState}from'../../../../GlobalState';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Category=function Category(){var state=useContext(GlobalState);var _state$token=_slicedToArray(state.token,1),token=_state$token[0];var _state$categoryAPI$ca=_slicedToArray(state.categoryAPI.categories,1),categories=_state$categoryAPI$ca[0];var _state$categoryAPI$ca2=_slicedToArray(state.categoryAPI.callback,2),callback=_state$categoryAPI$ca2[0],setCallback=_state$categoryAPI$ca2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),onEdit=_useState4[0],setOnEdit=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setId=_useState6[1];var createCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,_res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!onEdit){_context.next=8;break;}_context.next=4;return axios.put(\"/api/category/\".concat(id),{name:category},{headers:{Authorization:token}});case 4:res=_context.sent;swal(\"Success!\",res.data.msg,\"success\");_context.next=12;break;case 8:_context.next=10;return axios.post('/api/category',{name:category},{headers:{Authorization:token}});case 10:_res=_context.sent;swal(\"Success!\",_res.data.msg,\"success\");case 12:setOnEdit(false);setCallback(!callback);setCategory('');_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);swal(\"Error!\",_context.t0.response.data.msg,\"error\");case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return function createCategory(){return _ref.apply(this,arguments);};}();var editCategory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,name){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setId(id);setCategory(name);setOnEdit(true);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function editCategory(_x,_x2){return _ref2.apply(this,arguments);};}();var deleteCategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/category/\".concat(id),{headers:{Authorization:token}});case 3:res=_context3.sent;swal(\"Success!\",res.data.msg,\"success\");setCallback(!callback);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);swal(\"Error!\",_context3.t0.response.data.msg,\"error\");case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function deleteCategory(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"dash-title\",children:\"Category\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dash-create\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-single card-add-category\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return createCategory();},children:onEdit?\"Update\":\"Create\"})})]})}),/*#__PURE__*/_jsx(\"section\",{className:\"recent\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"activity-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"activity-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Categories\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created At\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Updated At\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:categories.map(function(category){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:category.name}),/*#__PURE__*/_jsx(\"td\",{children:new Date(category.createdAt).toDateString()}),/*#__PURE__*/_jsx(\"td\",{children:new Date(category.updatedAt).toDateString()}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteCategory(category._id);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return editCategory(category._id,category.name);},children:\"Edit\"})]})]},category._id);})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"summary\",children:/*#__PURE__*/_jsx(\"div\",{className:\"summary-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"summary-single\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ti-id-badge\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:categories.length}),/*#__PURE__*/_jsx(\"small\",{children:\"Number of categories\"})]})]})})})]})})]});};export default Category;","map":{"version":3,"sources":["C:/Users/ASUS/Documents/React/MERN-E/client/src/components/mainpage/admin/category/Category.js"],"names":["React","useState","useContext","axios","swal","GlobalState","Category","state","token","categoryAPI","categories","callback","setCallback","category","setCategory","onEdit","setOnEdit","id","setId","createCategory","put","name","headers","Authorization","res","data","msg","post","response","editCategory","deleteCategory","delete","e","target","value","map","Date","createdAt","toDateString","updatedAt","_id","length"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport swal from 'sweetalert';\r\n\r\nimport { GlobalState } from '../../../../GlobalState';\r\n\r\nconst Category = () => {\r\n  const state = useContext(GlobalState);\r\n  const [token] = state.token;\r\n  const [categories] = state.categoryAPI.categories;\r\n  const [callback, setCallback] = state.categoryAPI.callback;\r\n\r\n  const [category, setCategory] = useState('');\r\n  const [onEdit, setOnEdit] = useState(false);\r\n  const [id, setId] = useState('');\r\n\r\n  const createCategory = async () => {\r\n    try {\r\n      if (onEdit) {\r\n        const res = await axios.put(`/api/category/${id}`, {name: category}, {\r\n          headers: {Authorization: token}\r\n        })\r\n  \r\n        swal(\"Success!\", res.data.msg, \"success\");\r\n      } else {\r\n        const res = await axios.post('/api/category', {name: category}, {\r\n          headers: {Authorization: token}\r\n        })\r\n  \r\n        swal(\"Success!\", res.data.msg, \"success\");\r\n      }\r\n\r\n      setOnEdit(false);\r\n      setCallback(!callback);\r\n      setCategory('');\r\n    } catch (err) { \r\n      swal(\"Error!\", err.response.data.msg, \"error\");\r\n    }\r\n  }\r\n\r\n  const editCategory = async (id, name) => {\r\n    setId(id);\r\n    setCategory(name);\r\n    setOnEdit(true);\r\n  }\r\n\r\n  const deleteCategory = async (id) => {\r\n    try {\r\n      const res = await axios.delete(`/api/category/${id}`, {\r\n        headers: {Authorization: token}\r\n      })\r\n\r\n      swal(\"Success!\", res.data.msg, \"success\");\r\n      setCallback(!callback);\r\n    } catch (err) {\r\n      swal(\"Error!\", err.response.data.msg, \"error\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main>    \r\n      <h2 className=\"dash-title\">Category</h2>\r\n      \r\n      <div className=\"dash-create\">\r\n        <div className=\"card-single card-add-category\">\r\n          <div className=\"card-body\">\r\n            <div>\r\n              <h5>Name</h5>\r\n              <input type=\"text\" name=\"category\" value={category} \r\n                onChange={(e) => setCategory(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"card-footer\">\r\n            <button onClick={() => createCategory()}>{ onEdit ? \"Update\" : \"Create\" }</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <section className=\"recent\">\r\n        <div className=\"activity-grid\">\r\n          <div className=\"activity-card\">\r\n              <h3>Categories</h3>\r\n              \r\n              <div className=\"table-responsive\">\r\n                <table>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Name</th>\r\n                      <th>Created At</th>\r\n                      <th>Updated At</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {\r\n                      categories.map(category => (\r\n                        <tr key={category._id}>\r\n                          <td>{category.name}</td>\r\n                          <td>{new Date(category.createdAt).toDateString()}</td>\r\n                          <td>{new Date(category.updatedAt).toDateString()}</td>\r\n                          <td>\r\n                            <button onClick={() => deleteCategory(category._id)}>Delete</button>\r\n                            <button onClick={() => editCategory(category._id, category.name)}>Edit</button>\r\n                          </td>\r\n                        </tr>\r\n                      ))\r\n                    }\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n          </div>\r\n          \r\n          <div className=\"summary\">\r\n            <div className=\"summary-card\">\r\n              <div className=\"summary-single\">\r\n                <span className=\"ti-id-badge\"></span>\r\n                <div>\r\n                  <h5>{categories.length}</h5>\r\n                  <small>Number of categories</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Category\r\n"]},"metadata":{},"sourceType":"module"}