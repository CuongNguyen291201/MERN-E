{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\React\\\\MERN-E\\\\client\\\\src\\\\components\\\\mainpage\\\\admin\\\\create-product\\\\CreateProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { GlobalState } from '../../../../GlobalState';\nimport Loading from '../../utils/loading/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  product_id: '',\n  title: '',\n  price: 0,\n  description: '',\n  content: '',\n  category: '',\n  _id: ''\n};\n\nconst CreateProduct = () => {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [token] = state.token;\n  const [products] = state.productsAPI.products;\n  const [categories] = state.categoryAPI.categories;\n  const [callback, setCallback] = state.productsAPI.callback;\n  const [isAdmin] = state.userAPI.isAdmin;\n  const [page, setPage] = state.productsAPI.page;\n  const [sort, setSort] = state.productsAPI.sort;\n  const [product, setProduct] = useState(initialState);\n  const [images, setImages] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [edit, setEdit] = useState(false);\n  const params = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    if (params.id) {\n      setEdit(true);\n      products.forEach(product => {\n        if (product._id === params.id) {\n          setProduct(product);\n          setImages(product.images);\n        }\n      });\n    } else {\n      setEdit(false);\n      setProduct(initialState);\n      setImages(false);\n    }\n  }, [params, products]);\n  useEffect(() => {\n    setPage(10);\n    setSort('');\n  }, [setPage, setSort]);\n  const styleUpload = {\n    display: images ? \"block\" : \"none\"\n  };\n\n  const handleUpload = async e => {\n    e.preventDefault();\n\n    try {\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\");\n      const file = e.target.files[0];\n      if (!file) return swal(\"Error\", \"File not exist.\", \"error\");\n      if (file.size > 1024 * 1024) return swal(\"Error\", \"Size too large.\", \"error\");\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') return swal(\"Error\", \"File format is incorrect.\", \"error\");\n      let formData = new FormData();\n      formData.append('file', file);\n      setLoading(true);\n      const res = await axios.post('/api/upload', formData, {\n        headers: {\n          'content-type': 'multipart/form-data',\n          Authorization: token\n        }\n      });\n      setLoading(false);\n      setImages(res.data);\n    } catch (err) {\n      swal(\"Error\", err.response.data.msg, \"error\");\n    }\n  };\n\n  const handleDestroy = async e => {\n    try {\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\");\n      setLoading(true);\n      await axios.post('/api/destroy', {\n        public_id: images.public_id\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      setLoading(false);\n      setImages(false);\n    } catch (err) {\n      swal(\"Error\", err.response.data.msg, \"error\");\n    }\n  };\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setProduct({ ...product,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\");\n      if (!images) return swal(\"Error\", \"No image upload.\", \"error\");\n\n      if (edit) {\n        await axios.put(`/api/products/${product._id}`, { ...product,\n          images\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n      } else {\n        await axios.post('/api/products', { ...product,\n          images\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n      }\n\n      setCallback(!callback);\n      history.push('/admin');\n    } catch (err) {\n      swal(\"Error\", err.response.data.msg, \"error\");\n    }\n  };\n\n  const deleteProduct = async (id, public_id) => {\n    try {\n      setLoading(true);\n      const destroyImg = axios.post('/api/destroy', {\n        public_id\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      const deleteProduct = axios.delete(`/api/products/${id}`, {\n        headers: {\n          Authorization: token\n        }\n      });\n      await destroyImg;\n      await deleteProduct;\n      setCallback(!callback);\n      setLoading(false);\n      history.push('/admin');\n    } catch (err) {\n      swal(\"Error\", err.response.data.msg, \"error\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"dash-title\",\n      children: \"Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dash-create\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-single\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"create-product\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                name: \"file\",\n                id: \"file_up\",\n                onChange: handleUpload\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 17\n              }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"file_img\",\n                children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 40\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"file_img\",\n                style: styleUpload,\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: images ? images.url : \"\",\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  onClick: handleDestroy,\n                  children: \"x\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"product_id\",\n                  children: \"Product ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"product_id\",\n                  id: \"product_id\",\n                  required: true,\n                  value: product.product_id,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"title\",\n                  children: \"Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"title\",\n                  id: \"title\",\n                  required: true,\n                  value: product.title,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"price\",\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"price\",\n                  id: \"price\",\n                  required: true,\n                  value: product.price,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"description\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  type: \"text\",\n                  name: \"description\",\n                  id: \"description\",\n                  required: true,\n                  value: product.description,\n                  rows: \"2\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"content\",\n                  children: \"Content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  type: \"text\",\n                  name: \"content\",\n                  id: \"content\",\n                  required: true,\n                  value: product.content,\n                  rows: \"3\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"categories\",\n                  children: \"Categories:  \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"category\",\n                  value: product.category,\n                  onChange: handleChange,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Please select a category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 21\n                  }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: category.name,\n                    children: category.name\n                  }, category._id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                children: edit ? \"Update\" : \"Create\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"recent\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"activity-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"activity-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Sold\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: products.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: product.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: product.price\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: product.sold\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-team\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: product.images.url,\n                      alt: \"\",\n                      className: \"img\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 236,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: product.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [/*#__PURE__*/_jsxDEV(Link, {\n                      to: `/admin/edit-product/${product._id}`,\n                      style: {\n                        marginRight: '5px'\n                      },\n                      children: \"Edit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 242,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Link, {\n                      to: \"/admin/create-product\",\n                      onClick: () => deleteProduct(product._id, product.images.public_id),\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 243,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 25\n                  }, this)]\n                }, product._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-single\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ti-id-badge\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"196\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: \"Number of staff\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-single\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ti-calendar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: \"Number of leave\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-single\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ti-face-smile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: \"Profile update request\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CreateProduct, \"K6C74eDE8kA4Xvw84NrtIIv0/rY=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = CreateProduct;\nexport default CreateProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateProduct\");","map":{"version":3,"sources":["C:/Users/ASUS/Documents/React/MERN-E/client/src/components/mainpage/admin/create-product/CreateProduct.js"],"names":["React","useState","useContext","useEffect","Link","axios","swal","useHistory","useParams","GlobalState","Loading","initialState","product_id","title","price","description","content","category","_id","CreateProduct","state","token","products","productsAPI","categories","categoryAPI","callback","setCallback","isAdmin","userAPI","page","setPage","sort","setSort","product","setProduct","images","setImages","loading","setLoading","edit","setEdit","params","history","id","forEach","styleUpload","display","handleUpload","e","preventDefault","file","target","files","size","type","formData","FormData","append","res","post","headers","Authorization","data","err","response","msg","handleDestroy","public_id","handleChange","name","value","handleSubmit","put","push","deleteProduct","destroyImg","delete","url","map","sold","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport swal from 'sweetalert';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\n\r\nimport { GlobalState } from '../../../../GlobalState';\r\nimport Loading from '../../utils/loading/Loading';\r\n\r\nconst initialState = {\r\n  product_id: '',\r\n  title: '',\r\n  price: 0,\r\n  description: '',\r\n  content: '',\r\n  category: '',\r\n  _id: ''\r\n};\r\n\r\nconst CreateProduct = () => {\r\n  const state = useContext(GlobalState);\r\n  const [token] = state.token;\r\n  const [products] = state.productsAPI.products;\r\n  const [categories] = state.categoryAPI.categories;\r\n  const [callback, setCallback] = state.productsAPI.callback;\r\n  const [isAdmin] = state.userAPI.isAdmin;\r\n  const [page, setPage] = state.productsAPI.page;\r\n  const [sort, setSort] = state.productsAPI.sort;\r\n\r\n  const [product, setProduct] = useState(initialState);\r\n  const [images, setImages] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [edit, setEdit] = useState(false);\r\n\r\n  const params = useParams();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (params.id) {\r\n      setEdit(true)\r\n      products.forEach(product => {\r\n        if (product._id === params.id) {\r\n          setProduct(product)\r\n          setImages(product.images)\r\n        }    \r\n      })\r\n    } else {\r\n      setEdit(false)\r\n      setProduct(initialState)\r\n      setImages(false)\r\n    }\r\n  }, [params, products])\r\n\r\n  useEffect(() => {\r\n    setPage(10)\r\n    setSort('')\r\n  }, [setPage, setSort])\r\n\r\n  const styleUpload = {\r\n    display: images ? \"block\" : \"none\"\r\n  }\r\n\r\n  const handleUpload = async (e) => {\r\n    e.preventDefault()\r\n    try {\r\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\")\r\n      const file = e.target.files[0]\r\n\r\n      if (!file) return swal(\"Error\", \"File not exist.\", \"error\")\r\n      if (file.size > 1024 * 1024) return swal(\"Error\", \"Size too large.\", \"error\")\r\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') return swal(\"Error\", \"File format is incorrect.\", \"error\")\r\n\r\n      let formData = new FormData()\r\n      formData.append('file', file)\r\n\r\n      setLoading(true)\r\n      const res = await axios.post('/api/upload', formData, {\r\n        headers: {'content-type': 'multipart/form-data', Authorization: token}\r\n      })\r\n      setLoading(false)\r\n      setImages(res.data)\r\n    } catch (err) {\r\n      swal(\"Error\", err.response.data.msg, \"error\")\r\n    }\r\n  }\r\n\r\n  const handleDestroy = async (e) => {\r\n    try {\r\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\")\r\n      setLoading(true)\r\n      await axios.post('/api/destroy', {public_id: images.public_id}, {\r\n        headers: {Authorization: token}\r\n      })\r\n      setLoading(false)\r\n      setImages(false)\r\n    } catch (err) {\r\n      swal(\"Error\", err.response.data.msg, \"error\")\r\n    }\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    const {name, value} = e.target\r\n    setProduct({...product, [name]: value})\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    try {\r\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\")\r\n      if (!images) return swal(\"Error\", \"No image upload.\", \"error\")  \r\n      \r\n      if (edit) {\r\n        await axios.put(`/api/products/${product._id}`, {...product, images}, {\r\n          headers: {Authorization: token}\r\n        })\r\n      } else {\r\n        await axios.post('/api/products', {...product, images}, {\r\n          headers: {Authorization: token}\r\n        })  \r\n      }\r\n      setCallback(!callback)\r\n      history.push('/admin')\r\n    } catch (err) {\r\n      swal(\"Error\", err.response.data.msg, \"error\")\r\n    }\r\n  }\r\n\r\n  const deleteProduct = async (id, public_id) => {\r\n    try {\r\n      setLoading(true)\r\n      const destroyImg = axios.post('/api/destroy', {public_id}, {\r\n        headers: {Authorization: token}\r\n      })\r\n\r\n      const deleteProduct = axios.delete(`/api/products/${id}`, {\r\n        headers: {Authorization: token}\r\n      })\r\n\r\n      await destroyImg\r\n      await deleteProduct\r\n      setCallback(!callback)\r\n      setLoading(false)\r\n      history.push('/admin')\r\n    } catch (err) {\r\n      swal(\"Error\", err.response.data.msg, \"error\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main>    \r\n      <h2 className=\"dash-title\">Product</h2>\r\n      <div className=\"dash-create\">\r\n        <div className=\"card-single\">\r\n          <div className=\"card-body\">\r\n            <div className=\"create-product\">\r\n              <div className=\"upload\">\r\n                <input type=\"file\" name=\"file\" id=\"file_up\" onChange={handleUpload} />\r\n                {\r\n                  loading ? \r\n                    <div id=\"file_img\"><Loading /></div>\r\n                  :\r\n                    <div id=\"file_img\" style={styleUpload}>\r\n                      <img src={images ? images.url : \"\"} alt=\"\"/>\r\n                      <span onClick={handleDestroy}>x</span>\r\n                    </div>\r\n                }\r\n              </div>\r\n\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"product_id\">Product ID</label>\r\n                  <input type=\"text\" name=\"product_id\" id=\"product_id\" required value={product.product_id} onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"title\">Title</label>\r\n                  <input type=\"text\" name=\"title\" id=\"title\" required value={product.title} onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"price\">Price</label>\r\n                  <input type=\"text\" name=\"price\" id=\"price\" required value={product.price} onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"description\">Description</label>\r\n                  <textarea type=\"text\" name=\"description\" id=\"description\" required value={product.description} rows=\"2\" onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"content\">Content</label>\r\n                  <textarea type=\"text\" name=\"content\" id=\"content\" required value={product.content} rows=\"3\" onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"categories\">Categories:  </label>\r\n                  <select name=\"category\" value={product.category} onChange={handleChange}>\r\n                    <option value=\"\">Please select a category</option>\r\n                    {\r\n                      categories.map(category => (\r\n                        <option key={category._id} value={category.name}>\r\n                          {category.name}\r\n                        </option>\r\n                      ))\r\n                    }\r\n                  </select>\r\n                </div>\r\n\r\n                <button type=\"submit\">{edit ? \"Update\" : \"Create\"}</button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <section className=\"recent\">\r\n        <div className=\"activity-grid\">\r\n          <div className=\"activity-card\">\r\n            <h3>Products</h3>\r\n              \r\n            <div className=\"table-responsive\">\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Name</th>\r\n                    <th>Price</th>\r\n                    <th>Sold</th>\r\n                    <th>Image</th>\r\n                    <th>Category</th>\r\n                    <th>Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {\r\n                    products.map(product => (\r\n                      <tr key={product._id}>\r\n                        <td>{product.title}</td>\r\n                        <td>{product.price}</td>\r\n                        <td>{product.sold}</td>\r\n                        <td className=\"td-team\">\r\n                            <img src={product.images.url} alt=\"\" className=\"img\" />\r\n                        </td>\r\n                        <td>\r\n                          {product.category}\r\n                        </td>\r\n                        <td>\r\n                          <Link to={`/admin/edit-product/${product._id}`} style={{marginRight: '5px'}}>Edit</Link>\r\n                          <Link to=\"/admin/create-product\" onClick={() => deleteProduct(product._id, product.images.public_id)}>Delete</Link>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  }\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"summary\">\r\n            <div className=\"summary-card\">\r\n              <div className=\"summary-single\">\r\n                <span className=\"ti-id-badge\"></span>\r\n                <div>\r\n                  <h5>196</h5>\r\n                  <small>Number of staff</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"summary-single\">\r\n                <span className=\"ti-calendar\"></span>\r\n                <div>\r\n                  <h5>16</h5>\r\n                  <small>Number of leave</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"summary-single\">\r\n                <span className=\"ti-face-smile\"></span>\r\n                <div>\r\n                  <h5>12</h5>\r\n                  <small>Profile update request</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default CreateProduct\r\n"]},"metadata":{},"sourceType":"module"}