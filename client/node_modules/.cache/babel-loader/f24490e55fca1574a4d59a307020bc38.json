{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\React\\\\MERN-E\\\\client\\\\src\\\\components\\\\mainpage\\\\admin\\\\create-product\\\\CreateProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { GlobalState } from '../../../../GlobalState';\nimport Loading from '../../utils/loading/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  product_id: '',\n  title: '',\n  price: 0,\n  description: '',\n  content: '',\n  category: '',\n  _id: ''\n};\n\nconst CreateProduct = () => {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [token] = state.token;\n  const [products] = state.productsAPI.products;\n  const [categories] = state.categoryAPI.categories;\n  const [callback, setCallback] = state.productsAPI.callback;\n  const [isAdmin] = state.userAPI.isAdmin;\n  const [product, setProduct] = useState(initialState);\n  const [images, setImages] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [edit, setEdit] = useState(false);\n  const params = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    if (params.id) {\n      setEdit(true);\n      products.forEach(product => {\n        if (product._id === params.id) {\n          setProduct(product);\n          setImages(product.images);\n        }\n      });\n    } else {\n      setEdit(false);\n      setProduct(initialState);\n      setImages(false);\n    }\n  }, [params, products]);\n  const styleUpload = {\n    display: images ? \"block\" : \"none\"\n  };\n\n  const handleUpload = async e => {\n    e.preventDefault();\n\n    try {\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\");\n      const file = e.target.files[0];\n      if (!file) return swal(\"Error\", \"File not exist.\", \"error\");\n      if (file.size > 1024 * 1024) return swal(\"Error\", \"Size too large.\", \"error\");\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') return swal(\"Error\", \"File format is incorrect.\", \"error\");\n      let formData = new FormData();\n      formData.append('file', file);\n      setLoading(true);\n      const res = await axios.post('/api/upload', formData, {\n        headers: {\n          'content-type': 'multipart/form-data',\n          Authorization: token\n        }\n      });\n      setLoading(false);\n      setImages(res.data);\n    } catch (err) {\n      swal(\"Error\", err.response.data.msg, \"error\");\n    }\n  };\n\n  const handleDestroy = async e => {\n    try {\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\");\n      setLoading(true);\n      await axios.post('/api/destroy', {\n        public_id: images.public_id\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      setLoading(false);\n      setImages(false);\n    } catch (err) {\n      swal(\"Error\", err.response.data.msg, \"error\");\n    }\n  };\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setProduct({ ...product,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\");\n      if (!images) return swal(\"Error\", \"No image upload.\", \"error\");\n\n      if (edit) {\n        await axios.put(`/api/products/${product._id}`, { ...product,\n          images\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n      } else {\n        await axios.post('/api/products', { ...product,\n          images\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n      }\n\n      setCallback(!callback);\n      history.push('/admin/create-product');\n    } catch (err) {\n      swal(\"Error\", err.response.data.msg, \"error\");\n    }\n  };\n\n  const deleteProduct = async (id, public_id) => {\n    try {\n      setLoading(true);\n      const destroyImg = axios.post('/api/destroy', {\n        public_id\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      const deleteProduct = axios.delete(`/api/products/${id}`, {\n        headers: {\n          Authorization: token\n        }\n      });\n      await destroyImg;\n      await deleteProduct;\n      setCallback(!callback);\n      setLoading(false);\n    } catch (err) {\n      swal(\"Error\", err.response.data.msg, \"error\");\n    }\n  };\n\n  return (\n    /*#__PURE__*/\n    // <div>\n    //   <input type=\"checkbox\" id=\"sidebar-toggle\" />\n    //   <div className=\"sidebar\">\n    //     <div className=\"sidebar-header\">\n    //       <h3 className=\"brand\">\n    //         <span className=\"ti-unlink\"></span> \n    //         <span>ADMIN</span>\n    //       </h3> \n    //       <label htmlFor=\"sidebar-toggle\" className=\"ti-menu-alt\"></label>\n    //     </div>\n    //     <div className=\"sidebar-menu\">\n    //       <ul>\n    //         <li>\n    //           <Link to=\"/admin\">\n    //             <span className=\"ti-home\"></span>\n    //             <span>Home</span>\n    //           </Link>\n    //         </li>\n    //         <li>\n    //           <Link to=\"/admin/create-product\">\n    //             <span className=\"ti-face-smile\"></span>\n    //             <span>Create Product</span>\n    //           </Link>\n    //         </li>\n    //         <li>\n    //           <Link to=\"/admin/create-category\">\n    //             <span className=\"ti-agenda\"></span>\n    //             <span>Create Category</span>\n    //           </Link>\n    //         </li>\n    //         <li>\n    //           <Link to=\"!#\">\n    //             <span className=\"ti-clipboard\"></span>\n    //             <span>Leaves</span>\n    //           </Link>\n    //         </li>\n    //         <li>\n    //           <Link to=\"!#\">\n    //             <span className=\"ti-folder\"></span>\n    //             <span>Projects</span>\n    //           </Link>\n    //         </li>\n    //         <li>\n    //           <Link to=\"!#\">\n    //             <span className=\"ti-time\"></span>\n    //             <span>Timesheet</span>\n    //           </Link>\n    //         </li>\n    //         <li>\n    //           <Link to=\"!#\">\n    //             <span className=\"ti-book\"></span>\n    //             <span>Contacts</span>\n    //           </Link>\n    //         </li>\n    //         <li>\n    //           <Link to=\"!#\">\n    //             <span className=\"ti-settings\"></span>\n    //             <span>Account</span>\n    //           </Link>\n    //         </li>\n    //       </ul>\n    //     </div>\n    //   </div>\n    //   <div className=\"main-content\">     \n    //     <header className=\"admin-header\">\n    //       <div className=\"search-wrapper\">\n    //         <span className=\"ti-search\"></span>\n    //         <input type=\"search\" placeholder=\"Search\" />\n    //       </div>\n    //       <div className=\"social-icons\">\n    //         <span className=\"ti-bell\"></span>\n    //         <span className=\"ti-comment\"></span>\n    //         <div></div>\n    //       </div>\n    //     </header>\n    //   </div>\n    // </div>\n    _jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"dash-title\",\n        children: \"Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dash-create\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-single\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"create-product\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"upload\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  name: \"file\",\n                  id: \"file_up\",\n                  onChange: handleUpload\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 17\n                }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"file_img\",\n                  children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 40\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"file_img\",\n                  style: styleUpload,\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: images ? images.url : \"\",\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    onClick: handleDestroy,\n                    children: \"x\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleSubmit,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"product_id\",\n                    children: \"Product ID\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"product_id\",\n                    id: \"product_id\",\n                    required: true,\n                    value: product.product_id,\n                    onChange: handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"title\",\n                    children: \"Title\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"title\",\n                    id: \"title\",\n                    required: true,\n                    value: product.title,\n                    onChange: handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"price\",\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"price\",\n                    id: \"price\",\n                    required: true,\n                    value: product.price,\n                    onChange: handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"description\",\n                    children: \"Description\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    type: \"text\",\n                    name: \"description\",\n                    id: \"description\",\n                    required: true,\n                    value: product.description,\n                    rows: \"2\",\n                    onChange: handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"content\",\n                    children: \"Content\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    type: \"text\",\n                    name: \"content\",\n                    id: \"content\",\n                    required: true,\n                    value: product.content,\n                    rows: \"3\",\n                    onChange: handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"categories\",\n                    children: \"Categories:  \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"category\",\n                    value: product.category,\n                    onChange: handleChange,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Please select a category\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 267,\n                      columnNumber: 21\n                    }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: category._id,\n                      children: category.name\n                    }, category._id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  children: edit ? \"Update\" : \"Create\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"recent\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"activity-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"activity-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Products\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-responsive\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 294,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 295,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Sold\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Image\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Category\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 298,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Actions\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 299,\n                      columnNumber: 21\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: products.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: product.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 306,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: product.price\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: product.sold\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 308,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"td-team\",\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: product.images.url,\n                        alt: \"\",\n                        className: \"img\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 310,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 309,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: product.category\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [/*#__PURE__*/_jsxDEV(Link, {\n                        to: `/admin/edit-product/${product._id}`,\n                        style: {\n                          marginRight: '5px'\n                        },\n                        children: \"Edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 316,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Link, {\n                        to: \"/admin/create-product\",\n                        onClick: () => deleteProduct(product._id, product.images.public_id),\n                        children: \"Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 317,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 25\n                    }, this)]\n                  }, product._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-single\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ti-id-badge\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"196\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: \"Number of staff\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-single\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ti-calendar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"16\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: \"Number of leave\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-single\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ti-face-smile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    children: \"12\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: \"Profile update request\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 5\n    }, this)\n  );\n};\n\n_s(CreateProduct, \"nLyboKAhyGpuM4pKvwCyXLoWWAA=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = CreateProduct;\nexport default CreateProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateProduct\");","map":{"version":3,"sources":["C:/Users/ASUS/Documents/React/MERN-E/client/src/components/mainpage/admin/create-product/CreateProduct.js"],"names":["React","useState","useContext","useEffect","Link","axios","swal","useHistory","useParams","GlobalState","Loading","initialState","product_id","title","price","description","content","category","_id","CreateProduct","state","token","products","productsAPI","categories","categoryAPI","callback","setCallback","isAdmin","userAPI","product","setProduct","images","setImages","loading","setLoading","edit","setEdit","params","history","id","forEach","styleUpload","display","handleUpload","e","preventDefault","file","target","files","size","type","formData","FormData","append","res","post","headers","Authorization","data","err","response","msg","handleDestroy","public_id","handleChange","name","value","handleSubmit","put","push","deleteProduct","destroyImg","delete","url","map","sold","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport swal from 'sweetalert';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\n\r\nimport { GlobalState } from '../../../../GlobalState';\r\nimport Loading from '../../utils/loading/Loading';\r\n\r\nconst initialState = {\r\n  product_id: '',\r\n  title: '',\r\n  price: 0,\r\n  description: '',\r\n  content: '',\r\n  category: '',\r\n  _id: ''\r\n};\r\n\r\nconst CreateProduct = () => {\r\n  const state = useContext(GlobalState);\r\n  const [token] = state.token;\r\n  const [products] = state.productsAPI.products;\r\n  const [categories] = state.categoryAPI.categories;\r\n  const [callback, setCallback] = state.productsAPI.callback;\r\n  const [isAdmin] = state.userAPI.isAdmin;\r\n\r\n  const [product, setProduct] = useState(initialState);\r\n  const [images, setImages] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [edit, setEdit] = useState(false);\r\n\r\n  const params = useParams();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (params.id) {\r\n      setEdit(true)\r\n      products.forEach(product => {\r\n        if (product._id === params.id) {\r\n          setProduct(product)\r\n          setImages(product.images)\r\n        }    \r\n      })\r\n    } else {\r\n      setEdit(false)\r\n      setProduct(initialState)\r\n      setImages(false)\r\n    }\r\n  }, [params, products])\r\n\r\n  const styleUpload = {\r\n    display: images ? \"block\" : \"none\"\r\n  }\r\n\r\n  const handleUpload = async (e) => {\r\n    e.preventDefault()\r\n    try {\r\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\")\r\n      const file = e.target.files[0]\r\n\r\n      if (!file) return swal(\"Error\", \"File not exist.\", \"error\")\r\n      if (file.size > 1024 * 1024) return swal(\"Error\", \"Size too large.\", \"error\")\r\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') return swal(\"Error\", \"File format is incorrect.\", \"error\")\r\n\r\n      let formData = new FormData()\r\n      formData.append('file', file)\r\n\r\n      setLoading(true)\r\n      const res = await axios.post('/api/upload', formData, {\r\n        headers: {'content-type': 'multipart/form-data', Authorization: token}\r\n      })\r\n      setLoading(false)\r\n      setImages(res.data)\r\n    } catch (err) {\r\n      swal(\"Error\", err.response.data.msg, \"error\")\r\n    }\r\n  }\r\n\r\n  const handleDestroy = async (e) => {\r\n    try {\r\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\")\r\n      setLoading(true)\r\n      await axios.post('/api/destroy', {public_id: images.public_id}, {\r\n        headers: {Authorization: token}\r\n      })\r\n      setLoading(false)\r\n      setImages(false)\r\n    } catch (err) {\r\n      swal(\"Error\", err.response.data.msg, \"error\")\r\n    }\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    const {name, value} = e.target\r\n    setProduct({...product, [name]: value})\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    try {\r\n      if (!isAdmin) return swal(\"Error\", \"You're not an admin.\", \"error\")\r\n      if (!images) return swal(\"Error\", \"No image upload.\", \"error\")  \r\n      \r\n      if (edit) {\r\n        await axios.put(`/api/products/${product._id}`, {...product, images}, {\r\n          headers: {Authorization: token}\r\n        })\r\n      } else {\r\n        await axios.post('/api/products', {...product, images}, {\r\n          headers: {Authorization: token}\r\n        })  \r\n      }\r\n      setCallback(!callback)\r\n      history.push('/admin/create-product')\r\n    } catch (err) {\r\n      swal(\"Error\", err.response.data.msg, \"error\")\r\n    }\r\n  }\r\n\r\n  const deleteProduct = async (id, public_id) => {\r\n    try {\r\n      setLoading(true)\r\n      const destroyImg = axios.post('/api/destroy', {public_id}, {\r\n        headers: {Authorization: token}\r\n      })\r\n\r\n      const deleteProduct = axios.delete(`/api/products/${id}`, {\r\n        headers: {Authorization: token}\r\n      })\r\n\r\n      await destroyImg\r\n      await deleteProduct\r\n      setCallback(!callback)\r\n      setLoading(false)\r\n    } catch (err) {\r\n      swal(\"Error\", err.response.data.msg, \"error\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    // <div>\r\n    //   <input type=\"checkbox\" id=\"sidebar-toggle\" />\r\n    //   <div className=\"sidebar\">\r\n    //     <div className=\"sidebar-header\">\r\n    //       <h3 className=\"brand\">\r\n    //         <span className=\"ti-unlink\"></span> \r\n    //         <span>ADMIN</span>\r\n    //       </h3> \r\n    //       <label htmlFor=\"sidebar-toggle\" className=\"ti-menu-alt\"></label>\r\n    //     </div>\r\n          \r\n    //     <div className=\"sidebar-menu\">\r\n    //       <ul>\r\n    //         <li>\r\n    //           <Link to=\"/admin\">\r\n    //             <span className=\"ti-home\"></span>\r\n    //             <span>Home</span>\r\n    //           </Link>\r\n    //         </li>\r\n    //         <li>\r\n    //           <Link to=\"/admin/create-product\">\r\n    //             <span className=\"ti-face-smile\"></span>\r\n    //             <span>Create Product</span>\r\n    //           </Link>\r\n    //         </li>\r\n    //         <li>\r\n    //           <Link to=\"/admin/create-category\">\r\n    //             <span className=\"ti-agenda\"></span>\r\n    //             <span>Create Category</span>\r\n    //           </Link>\r\n    //         </li>\r\n    //         <li>\r\n    //           <Link to=\"!#\">\r\n    //             <span className=\"ti-clipboard\"></span>\r\n    //             <span>Leaves</span>\r\n    //           </Link>\r\n    //         </li>\r\n    //         <li>\r\n    //           <Link to=\"!#\">\r\n    //             <span className=\"ti-folder\"></span>\r\n    //             <span>Projects</span>\r\n    //           </Link>\r\n    //         </li>\r\n    //         <li>\r\n    //           <Link to=\"!#\">\r\n    //             <span className=\"ti-time\"></span>\r\n    //             <span>Timesheet</span>\r\n    //           </Link>\r\n    //         </li>\r\n    //         <li>\r\n    //           <Link to=\"!#\">\r\n    //             <span className=\"ti-book\"></span>\r\n    //             <span>Contacts</span>\r\n    //           </Link>\r\n    //         </li>\r\n    //         <li>\r\n    //           <Link to=\"!#\">\r\n    //             <span className=\"ti-settings\"></span>\r\n    //             <span>Account</span>\r\n    //           </Link>\r\n    //         </li>\r\n    //       </ul>\r\n    //     </div>\r\n    //   </div>\r\n      \r\n    //   <div className=\"main-content\">     \r\n    //     <header className=\"admin-header\">\r\n    //       <div className=\"search-wrapper\">\r\n    //         <span className=\"ti-search\"></span>\r\n    //         <input type=\"search\" placeholder=\"Search\" />\r\n    //       </div>\r\n          \r\n    //       <div className=\"social-icons\">\r\n    //         <span className=\"ti-bell\"></span>\r\n    //         <span className=\"ti-comment\"></span>\r\n    //         <div></div>\r\n    //       </div>\r\n    //     </header>\r\n          \r\n        \r\n    //   </div>\r\n    // </div>\r\n    <main>    \r\n      <h2 className=\"dash-title\">Product</h2>\r\n      <div className=\"dash-create\">\r\n        <div className=\"card-single\">\r\n          <div className=\"card-body\">\r\n            <div className=\"create-product\">\r\n              <div className=\"upload\">\r\n                <input type=\"file\" name=\"file\" id=\"file_up\" onChange={handleUpload} />\r\n                {\r\n                  loading ? \r\n                    <div id=\"file_img\"><Loading /></div>\r\n                  :\r\n                    <div id=\"file_img\" style={styleUpload}>\r\n                      <img src={images ? images.url : \"\"} alt=\"\"/>\r\n                      <span onClick={handleDestroy}>x</span>\r\n                    </div>\r\n                }\r\n              </div>\r\n\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"product_id\">Product ID</label>\r\n                  <input type=\"text\" name=\"product_id\" id=\"product_id\" required value={product.product_id} onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"title\">Title</label>\r\n                  <input type=\"text\" name=\"title\" id=\"title\" required value={product.title} onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"price\">Price</label>\r\n                  <input type=\"text\" name=\"price\" id=\"price\" required value={product.price} onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"description\">Description</label>\r\n                  <textarea type=\"text\" name=\"description\" id=\"description\" required value={product.description} rows=\"2\" onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"content\">Content</label>\r\n                  <textarea type=\"text\" name=\"content\" id=\"content\" required value={product.content} rows=\"3\" onChange={handleChange} />\r\n                </div>\r\n                <div className=\"row\">\r\n                  <label htmlFor=\"categories\">Categories:  </label>\r\n                  <select name=\"category\" value={product.category} onChange={handleChange}>\r\n                    <option value=\"\">Please select a category</option>\r\n                    {\r\n                      categories.map(category => (\r\n                        <option key={category._id} value={category._id}>\r\n                          {category.name}\r\n                        </option>\r\n                      ))\r\n                    }\r\n                  </select>\r\n                </div>\r\n\r\n                <button type=\"submit\">{edit ? \"Update\" : \"Create\"}</button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <section className=\"recent\">\r\n        <div className=\"activity-grid\">\r\n          <div className=\"activity-card\">\r\n            <h3>Products</h3>\r\n              \r\n            <div className=\"table-responsive\">\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Name</th>\r\n                    <th>Price</th>\r\n                    <th>Sold</th>\r\n                    <th>Image</th>\r\n                    <th>Category</th>\r\n                    <th>Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {\r\n                    products.map(product => (\r\n                      <tr key={product._id}>\r\n                        <td>{product.title}</td>\r\n                        <td>{product.price}</td>\r\n                        <td>{product.sold}</td>\r\n                        <td className=\"td-team\">\r\n                            <img src={product.images.url} alt=\"\" className=\"img\" />\r\n                        </td>\r\n                        <td>\r\n                          {product.category}\r\n                        </td>\r\n                        <td>\r\n                          <Link to={`/admin/edit-product/${product._id}`} style={{marginRight: '5px'}}>Edit</Link>\r\n                          <Link to=\"/admin/create-product\" onClick={() => deleteProduct(product._id, product.images.public_id)}>Delete</Link>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  }\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"summary\">\r\n            <div className=\"summary-card\">\r\n              <div className=\"summary-single\">\r\n                <span className=\"ti-id-badge\"></span>\r\n                <div>\r\n                  <h5>196</h5>\r\n                  <small>Number of staff</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"summary-single\">\r\n                <span className=\"ti-calendar\"></span>\r\n                <div>\r\n                  <h5>16</h5>\r\n                  <small>Number of leave</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"summary-single\">\r\n                <span className=\"ti-face-smile\"></span>\r\n                <div>\r\n                  <h5>12</h5>\r\n                  <small>Profile update request</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default CreateProduct\r\n"]},"metadata":{},"sourceType":"module"}